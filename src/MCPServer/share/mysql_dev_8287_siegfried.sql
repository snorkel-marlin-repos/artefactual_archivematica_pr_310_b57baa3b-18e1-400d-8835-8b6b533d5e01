-- Adds Siegfried as an ID tool
INSERT INTO `fpr_idtool` (`uuid`, `description`, `version`, `enabled`, `slug`) VALUES ('ea5274a2-9866-439c-a68c-5c8aadf6d3cd', 'Siegfried', '1.0.0', 1, 'siegfried-100');
INSERT INTO `fpr_idcommand` (`uuid`, `enabled`, `lastmodified`, `description`, `config`, `script_type`, `tool_id`, `script`) VALUES ('8cc792b4-362d-4002-8981-a4e808c04b24', 1, '2015-04-16 17:36:22', 'Identify using Siegfried', 'PUID', 'pythonScript', 'ea5274a2-9866-439c-a68c-5c8aadf6d3cd', 'from __future__ import print_function\n\nimport json\nimport subprocess\nimport sys\n\ndef file_tool(path):\n    return subprocess.check_output([\'file\', path]).strip()\n\ndef main(f):\n    try:\n        result = json.loads(subprocess.check_output(["sf", "-json", f]))\n    except subprocess.CalledProcessError as e:\n        print("Siegfried exited {} and no format was found.".format(e.returncode), file=sys.stderr)\n        return 1\n\n    match = result[\'files\'][0]\n    if len(match[\'matches\']) == 0 or match[\'matches\'][0][\'puid\'] == \'UNKNOWN\':\n        if "text" in file_tool(f):\n            print("x-fmt/111")\n        else:\n            print("Siegfried exited 0 but no format was found.", file=sys.stderr)\n            return 1\n    else:\n        print(match[\'matches\'][0][\'puid\'])\n\nif __name__ == \'__main__\':\n    sys.exit(main(sys.argv[1]))\n');
-- Identify transfer
INSERT INTO `MicroServiceChoiceReplacementDic` (`pk`, `choiceAvailableAtLink`, `description`, `replacementDic`, `replaces`, `lastModified`) VALUES ('bed4eeb1-d654-4d97-b98d-40eb51d3d4bb', 'f09847c2-ee51-429a-9478-a860477f6b8d', 'Siegfried version 1.0.0 PUID runs Identify using Siegfried', '{\"%IDCommand%\":\"8cc792b4-362d-4002-8981-a4e808c04b24\"}', NULL, NULL);
-- Identify ingest
INSERT INTO `MicroServiceChoiceReplacementDic` (`pk`, `choiceAvailableAtLink`, `description`, `replacementDic`, `replaces`, `lastModified`) VALUES ('664cbde3-e658-4288-87db-bd28266d83f5', '7a024896-c4f7-4808-a240-44c87c762bc5', 'Siegfried version 1.0.0 PUID runs Identify using Siegfried', '{\"%IDCommand%\":\"8cc792b4-362d-4002-8981-a4e808c04b24\"}', NULL, NULL);
-- Identify submission docs
INSERT INTO `MicroServiceChoiceReplacementDic` (`pk`, `choiceAvailableAtLink`, `description`, `replacementDic`, `replaces`, `lastModified`) VALUES ('25a91595-37f0-4373-a89a-56a757353fb8', '087d27be-c719-47d8-9bbb-9a7d8b609c44', 'Siegfried version 1.0.0 PUID runs Identify using Siegfried', '{\"%IDCommand%\":\"8cc792b4-362d-4002-8981-a4e808c04b24\"}', NULL, NULL);
